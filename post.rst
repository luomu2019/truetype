post — PostScript 表
====================


此表包含在 PostScript 打印机上使用 TrueType 或 OpenType™
字体所需的附加信息。这包括 FontInfo 字典条目的数据和所有字形的
PostScript 名称。有关 PostScript 名称的更多信息，请参阅\ `Adob​​e
字形列表规范 <https://github.com/adobe-type-tools/agl-specification>`__\ 。

版本 1.0、2.0 和 2.5 是指带有 TrueType 轮廓数据的 TrueType 字体和
OpenType 字体。带有 TrueType 数据的 OpenType 字体也可以使用 3.0 版。带有
CFF 数据的 OpenType 字体仅使用 3.0 版。

标题
--------------------

表格开头如下：

.. container:: has-inner-focus

   +-----------------------+-----------------------+-----------------------+
   | 类型                  | 姓名                  | 描述                  |
   +=======================+=======================+=======================+
   | 版本16点16            | 版本                  | 0x00010000 用于 1.0   |
   |                       |                       | 版 0x00020000 用于    |
   |                       |                       | 2.0 版                |
   |                       |                       | 0x00025000 用于 2.5   |
   |                       |                       | 版\ *（已弃用）*      |
   |                       |                       | 0x00030000 用于 3.0   |
   |                       |                       | 版                    |
   +-----------------------+-----------------------+-----------------------+
   | 固定的                | 斜体角度              | 与垂直方向逆时        |
   |                       |                       | 针度数的斜体角度。垂  |
   |                       |                       | 直文本为零，向右（向  |
   |                       |                       | 前）倾斜的文本为负。  |
   +-----------------------+-----------------------+-----------------------+
   | F字                   | 下划线位置            | 这是下划线顶          |
   |                       |                       | 部与基线的建议距离（  |
   |                       |                       | 负值表示低于基线）。  |
   |                       |                       | 由                    |
   |                       |                       | 于历史原因，不使用此  |
   |                       |                       | FontInfo              |
   |                       |                       | 字典键（笔画中心的 y  |
   |                       |                       | 坐标）的 PostScript   |
   |                       |                       | 定义。PostScript      |
   |                       |                       | 键的值可以通过从      |
   |                       |                       | 该字段的值中减去下划  |
   |                       |                       | 线厚度的一半来计算。  |
   +-----------------------+-----------------------+-----------------------+
   | F字                   | 下划线厚度            | 下划线粗              |
   |                       |                       | 细的建议值。一般来说  |
   |                       |                       | ，下划线粗细应与下划  |
   |                       |                       | 线字符的粗细（U+005F  |
   |                       |                       | LOW                   |
   |                       |                       | LINE）相              |
   |                       |                       | 匹配，也应与\ `OS/2   |
   |                       |                       | <os2#ss>`__\ 表中指定 |
   |                       |                       | 的删除线粗细相匹配。  |
   +-----------------------+-----------------------+-----------------------+
   | uint32                | isFixedPitch          | 如果                  |
   |                       |                       | 字体按比例间隔设置为  |
   |                       |                       | 0，如果字体           |
   |                       |                       | 不是按比例间隔（即等  |
   |                       |                       | 宽），则设置为非零。  |
   +-----------------------+-----------------------+-----------------------+
   | uint32                | minMemType42          | 下载 OpenType         |
   |                       |                       | 字体                  |
   |                       |                       | 时的最小内存使用量。  |
   +-----------------------+-----------------------+-----------------------+
   | uint32                | maxMemType42          | 下载 OpenType         |
   |                       |                       | 字体                  |
   |                       |                       | 时的最大内存使用量。  |
   +-----------------------+-----------------------+-----------------------+
   | uint32                | minMemType1           | 将 OpenType           |
   |                       |                       | 字体下载为 Type 1     |
   |                       |                       | 字体                  |
   |                       |                       | 时的最小内存使用量。  |
   +-----------------------+-----------------------+-----------------------+
   | uint32                | maxMemType1           | 将 OpenType           |
   |                       |                       | 字体下载为 Type 1     |
   |                       |                       | 字体                  |
   |                       |                       | 时的最大内存使用量。  |
   +-----------------------+-----------------------+-----------------------+

表中的最后四个条目之所以存在，是因为如果在下载字体之前知道可下载
OpenType 字体的虚拟内存 (VM) 要求，则 PostScript
驱动程序可以进行更好的内存管理。如果知道，应提供此信息。如果未知，请将值设置为零。驱动程序仍然可以工作，但效率会降低。

最大内存使用量是最小内存使用量加上最大运行时内存使用量。最大运行时内存使用取决于字体缩放器可能光栅化的任何位图的最大带大小。运行时内存使用可以通过渲染不同点大小的字符并比较内存使用来计算。

如果版本是 1.0 或 3.0，表格到此结束。2.0 和 2.5
版本的附加条目如下所示。Apple 定义了用于 Apple 高级排版 (AAT) 的 4.0
版本，在其文档中对此进行了描述。

1.0 版
--------------------------

此版本用于在字体文件包含标准 Macintosh TrueType 字体文件中的 258
个字形时提供 PostScript 字形名称（有关 258 个 Macintosh
字形名称的列表，请参见\ `Apple
规范 <https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6post.html>`__\ 中的“post”格式
1），以及字体不提供字形名称。结果，字形名称取自系统，字体不需要存储。

2.0 版
--------------------------

2.0 版用于使用不在 Macintosh
字形名称集中的字形名称的字体。一个给定的字体可以将它的一些字形映射到标准的
Macintosh 字形名称，还有一些映射到它自己的自定义名称。2.0
版“发布”表可用于具有 TrueType 或 CFF 版本 2 轮廓的字体。

对于 2.0 版，以下字段附加在标题的末尾：

.. container:: has-inner-focus

   +--------+---------------------------+-----------------------------+
   | 类型   | 姓名                      | 描述                        |
   +========+===========================+=============================+
   | uint16 | numGlyphs                 | 字形的                      |
   |        |                           | 数量（这应该与“maxp”表中的  |
   |        |                           | numGlyphs 相同）。          |
   +--------+---------------------------+-----------------------------+
   | uint16 | 字形名称索引[numGlyphs]。 | 字符串数                    |
   |        |                           | 据的索引数组。详情见下文。  |
   +--------+---------------------------+-----------------------------+
   | uint8  | 字符串数据[变量]          | 存储字符串数据。            |
   +--------+---------------------------+-----------------------------+

此字体文件包含不在标准 Macintosh
集中的字形，或者字体文件中字形的顺序与标准 Macintosh
集中不同。glyphNameIndex 数组将字形 ID
映射到字形名称索引。如果字形名称索引介于 0 和
257（含）之间，则将该索引视为 Macintosh 标准字形集中的字形索引并使用
Macintosh 字形名称。如果字形名称索引介于 258 和 65535 之间，则减去 258
并使用它来索引表末尾的 Pascal 字符串列表。

例如，假设 glyphNameIndex[302]（对于 glyph ID 302）为 217：由于该 glyph
name index 小于 258，glyph name 是 glyph ID 217 的 Macintosh glyph
name。假设 glyphNameIndex[408] 为 262：减去 258 , 差为 4;
该字形的字形名称是字符串数据中的第五个字符串（索引 4，基数 0）。

字符串数据从最后一个版本 2.0 标题字段延伸到表的末尾。字符串采用 Pascal
字符串格式，这意味着给定字符串的第一个字节是一个长度：该字符串中的字符数。不包括长度字节；例如，长度字节为8表示该长度字节后面的8个字节包含字符串字符数据。要查找给定字形名称索引的字符串，从第一个长度字节开始，推进该字节数以查找下一个字符串条目的长度字节，依此类推。

字形名称字符串以 ASCII 编码。有效字符仅限于 A–Z、a–z、0–9、“.”
（句号）和“_”（低线）。名称不得超过 63
个字符；一些较旧的实现可能假设长度限制为 31 个字符。

如果您不想将 PostScript 名称与特定字形相关联，请使用
0（指名称\ *.notdef*\ ）作为该字形 ID 的 glyphNameIndex 条目。

2.5 版
--------------------------

自 OpenType Specification v1.3 起，此版本的“post”表已被弃用。

此版本为包含 TrueType
轮廓的字体提供了一个节省空间的表格，这些轮廓包含标准 Macintosh
字形集的纯子集或简单重新排序。

.. container:: has-inner-focus

   ====== ================= ============================
   类型   姓名              描述
   ====== ================= ============================
   uint16 numGlyphs         字形数量
   整数8  偏移量[numGlyphs] 图形索引和字形标准顺序的区别
   ====== ================= ============================

此版本对于仅包含标准 Macintosh
字形集中的字形但这些字形以非标准顺序排列或缺少某些字形的基于 TrueType
的字体文件很有用。该表包含字体文件中每个字形的一个字节。该字节被视为一个带符号的偏移量，它将在此字体中使用的字形索引映射到标准字形索引。换句话说，假设字体包含三个字形
A、B 和 C，它们是标准排序中的第 37、38 和 39 个字形，“post”表将包含字节
+36、+36、+36 . 自 2000 年 2 月起，这种格式已被 Apple 弃用。

3.0 版
--------------------------

这个版本可以创建一个没有大量字形名称“post”表集的字体。带有 TrueType 或
CFF（版本 1 或 2）数据的 OpenType 字体可以使用 3.0 版“发布”表。

此版本指定不为此字体文件中的字形提供 PostScript 名称信息。此版本在
PostScript
打印机上的打印行为未指定，但它不应导致致命或不可恢复的错误。有些驱动程序可能什么也不打印；其他驱动程序可能会尝试使用默认命名方案进行打印。

*Windows
使用“post”表中的斜体角度值，但实际上并不\ *\ **要求**\ *\ 将任何字形名称存储为
Pascal 字符串。*

'post' 表和 OpenType 字体变体
----------------------------------------------------------------------------

在可变字体中，“post”表中的各种字体度量值可能需要针对不同的变体实例进行调整。可以在\ `度量变量
(MVAR) <mvar>`__\ 表中提供“帖子”条目的变量数据。不同的“帖子”条目使用值标签与
MVAR 表中的特定变体数据相关联，如下所示：

.. container:: has-inner-focus

   ========== ======
   “发布”条目 标签
   ========== ======
   下划线位置 '撤消'
   下划线厚度 'unds'
   ========== ======

..

   *注意：* italicAngle
   值不会由变体数据调整，因为它对应于“slnt”变体轴，可用于定义字体的变体空间。变体实例的适当
   post.italicAngle
   值可以从用于选择特定变体实例的“slnt”用户坐标导出。有关italicAngle 和
   'slnt' 轴之间关系的详细信息，请参阅\ `OpenType Design-Variation Axis
   Tag Registry中对 'slnt' 轴的讨论。 <dvaraxisreg>`__

有关 OpenType 字体变体的一般信息，请参阅章节\ `OpenType
字体变体概述 <otvaroverview>`__\ 。
